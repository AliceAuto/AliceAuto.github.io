---
layout: post
title: "wyh的矩阵"
permalink: /刷题模块/OJ/牛客/牛客竞赛语法入门班数组字符串习题/div3_{数学;数学归纳}_牛客_wyh的矩阵.md/
date: 2025-03-12
author: "JNMC孙国庆"
---

#### [备用返回通道](../../README.md)
# [转到题目](https://ac.nowcoder.com/acm/contest/19306/1022)


**我个人认为，这个题目并不简单**
**而对于这种数学题目，我们一般首先进行的一步就是打表**
### 什么是打表呢?
> 就是用暴力的方式，将答案打印输出到本地
> 我们用直观的判断，快速找到某些明显规律
> **也就是我们经常说的猜对了 :(  (╯‵□′)╯︵┻━┻**

#### 如果打表没有找到规律
> **这里就是我认为为什么难的原因了**
> 如果想严格的证明，理所应当地找到公式，就需要根据性质进行`总结`，`推导`,`证明`
> **这种方式非常依赖数学基础**,需要进行大量的练习

### 题目具体思路
要推导出在一个 n×n 的矩阵中，由连接相邻两条边的中点所围成的封闭区域内的数字之和的公式，我们可以通过以下步骤进行分析：

1. **构建矩阵**：首先，构建一个 n×n 的矩阵，其中元素从 1 到 n²，按行顺序填充。例如，当 n=5 时，矩阵如下：

   | 1  | 2  | 3  | 4  | 5  |
   |----|----|----|----|----|
   | 6  | 7  | 8  | 9  | 10 |
   | 11 | 12 | 13 | 14 | 15 |
   | 16 | 17 | 18 | 19 | 20 |
   | 21 | 22 | 23 | 24 | 25 |

2. **确定封闭区域**：连接相邻边的中点，形成一个菱形的封闭区域。对于 n=5 的情况，保留的数字如下：

   |    |    | 3  |    |    |
   |----|----|----|----|----|
   |    | 7  | 8  | 9  |    |
   | 11 | 12 | 13 | 14 | 15 |
   |    | 17 | 18 | 19 |    |
   |    |    | 23 |    |    |

3. **分析保留区域的结构**：观察保留的菱形区域，我们发现：
   - 中心行（第 (n+1)/2 行）包含 n 个元素。
   - 中心行以上和以下的每一行，随着距离中心行的增加，保留的元素数量减少 2 个。

4. **计算保留元素的数量**：总的保留元素数量为：
   - 中心行有 n 个元素。
   - 中心行以上共有 (n-1)/2 行，每行比上一行少 2 个元素，形成等差数列。
   - 中心行以下的部分与以上对称。

   因此，保留元素的总数量为：

   $$
      n + 2 \times \left( \left\lfloor \dfrac{n - 1}{2} \right\rfloor \right)^2
   $$
   $n为奇数，因此:$
   $$
   n + 2 \times \left( \left\lfloor \dfrac{n - 1}{2} \right\rfloor \right)^2
   = n + 2 \times \left( \frac{n-1}{2} \right)^2
= \frac{n^2 + 1}{2}
   $$

5. **计算保留元素的和**：由于矩阵元素是从 1 到 n² 的连续自然数，且保留区域对称分布，我们可以推测保留元素的和与总和的比例关系。

   总和为：

    $$
   \sum_{k=1}^{n^2} k = \frac{n^2 (n^2 + 1)}{2}
   $$

   由于保留元素数量占总元素数量的比例为：

    $$ 
   \frac{\frac{n^2 + 1}{2}}{n^2} = \frac{n^2 + 1}{2n^2} = \frac{1}{2} + \frac{1}{2n^2}
    $$

   因此，保留元素的和为：

  $$
   \left( \frac{1}{2} + \frac{1}{2n^2} \right) \times \frac{n^2 (n^2 + 1)}{2} = \frac{(n^2 + 1)^2}{4}
  $$
   **如果你困惑:为什么比例因子乘他就是答案呢?**
   > **其实这也是核心观察点**
   > **题目中说明n是奇数,从出题人角度，这个提示肯定有用**
   > 而巧的是 每个元素的平均值 $$\frac{n^2 + 1}{2}$$ 正好是个整数
   > **这就意味着，如果你删除一个互补的数对:$$a+b =n^2$$时，就不会影响其他元素的平均值，而我们发现删除的正好是对称的，这也就印证了我们的猜想**

通过上述推导，我们得出了保留区域内元素之和的公式为：

$$
\text{Sum} = \frac{(n^2 + 1)^2}{4}
$$


----
**到这里你也就看到了，想下次做对类似题目，你需要大量练习数学归纳法，以及对矩阵的理解，因此我认为还是比较难的**

> Tips: 我也正在练习这种，数学题我也很菜 (╯‵□′)╯︵┻━┻ :(